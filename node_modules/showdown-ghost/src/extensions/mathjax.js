

(function () {
    var mathjax = function (converter) {
        return [
            {
                type: 'lang',
                filter : function (text) {
                    return text.replace(/\\([\[\]])/g,'\\\\$1');
                }
            }
        ];
    };

    // Client-side export
    if (typeof window !== 'undefined' && window.Showdown && window.Showdown.extensions) {
        window.Showdown.extensions.mathjax = mathjax;
    }
    // Server-side export
    if (typeof module !== 'undefined') {
        module.exports = mathjax;
    }
}());
